import{p as B,_ as R}from"./Aside.vue_vue_type_script_setup_true_lang-6cedb9a5.js";import{d as w,k as _,u as F,b as N,o as n,c as f,h as e,g as V,w as b,v as g,B as $,y as v,t as D,i as j,a as x,x as I,F as y,C as z,D as A,f as G,E as C,G as L,K as E,j as K}from"./index-c99818d6.js";import{_ as S,u as M}from"./Button.vue_vue_type_script_setup_true_lang-45e30af3.js";const O={class:"text-center"},W=["src"],q=e("label",{for:"fileUpload",class:"inline-block my-4 px-8 py-4 border-2 border-solid border-black rounded-lg text-white bg-black cursor-pointer"},"上傳圖片",-1),H=e("label",null,"暱稱",-1),J={class:"mt-4"},Q=e("p",null,"性別",-1),X={class:"ml-6"},Y={key:0},Z={class:"text-red-500"},ee={class:"text-center"},te=w({__name:"UpdateProfile",setup(k){const t=_({name:"",gender:"",photo:""}),l=F().user,a=N(()=>t.value.photo||B);(()=>{t.value.name=l.userName,t.value.gender=l.userGender,t.value.photo=l.userProfilePhoto})(),l.$subscribe(()=>{t.value.name=l.userName,t.value.gender=l.userGender,t.value.photo=l.userProfilePhoto});const i=_(null),r=_(""),P=async c=>{var s;try{const o=c.target,h=(s=o==null?void 0:o.files)==null?void 0:s[0];if(!h||await U(c))return;const u=new FormData;u.append("file",h);const{data:{data:T}}=await M(u);t.value.photo=T.url}catch(o){console.error(o)}},p=async()=>{try{await z(t.value)}catch(c){console.error(c)}},U=c=>new Promise(s=>{const o=c.target;if(o.files&&o.files.length>0){const h=o.files[0],m=new Image;m.onload=()=>{const u={width:m.width,height:m.height};if(u.width!==u.height){r.value="圖片寬高比必需為 1:1，請重新輸入請重新輸入",s(!0);return}if(u.width>1e3||u.height>1e3){r.value="解析度寬度至少小於 1000像素以上，請重新輸入",s(!0);return}r.value="",s(!1)},m.src=URL.createObjectURL(h),m.onerror=()=>{console.log("Image load error")}}});return(c,s)=>(n(),f(y,null,[e("section",O,[e("img",{src:V(a),class:"w-[107px] h-[107px] border-1 border-black rounded-full mx-auto",alt:""},null,8,W),q,e("input",{id:"fileUpload",ref_key:"fileUpload",ref:i,type:"file",class:"hidden",onChange:s[0]||(s[0]=o=>P(o))},null,544)]),e("section",null,[H,b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.name=o),type:"text",placeholder:"Password",class:"w-full h-[50px] mt-1 px-6 py-4 border-2 border-solid border-black"},null,512),[[g,t.value.name]])]),e("section",J,[Q,e("label",null,[b(e("input",{type:"radio","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.gender=o),value:"male"},null,512),[[$,t.value.gender]]),v(" 男性 ")]),e("label",X,[b(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.gender=o),value:"female"},null,512),[[$,t.value.gender]]),v(" 女性 ")])]),r.value?(n(),f("section",Y,[e("p",Z,D(r.value),1)])):j("",!0),e("div",ee,[x(S,{type:"button",class:"my-4 sm:w-[80px]",onClick:p},{default:I(()=>[v(" 送出更新 ")]),_:1})])],64))}}),oe=e("label",null,"輸入新密碼",-1),se=e("label",{class:"pt-4 block"},"再次輸入",-1),le={class:"text-center"},re=w({__name:"ResetPassWord",setup(k){const t=_({password:"",confirmPassword:""}),l=async()=>{try{const{data:a}=await A(t.value);console.log(a)}catch(a){console.error(a)}};return(a,d)=>(n(),f(y,null,[e("section",null,[oe,b(e("input",{"onUpdate:modelValue":d[0]||(d[0]=i=>t.value.password=i),type:"password",placeholder:"請輸入新密碼",class:"w-full h-[50px] mt-1 px-6 py-4 border-2 border-solid border-black"},null,512),[[g,t.value.password]])]),e("section",null,[se,b(e("input",{"onUpdate:modelValue":d[1]||(d[1]=i=>t.value.confirmPassword=i),type:"password",placeholder:"請再次輸入密碼",class:"w-full h-[50px] mt-1 px-6 py-4 border-2 border-solid border-black"},null,512),[[g,t.value.confirmPassword]])]),e("div",le,[x(S,{class:"my-4 sm:w-[80px]",onClick:l},{default:I(()=>[v("重設密碼")]),_:1})])],64))}}),ae={class:"flex justify-between sm:mt-12 p-4 sm:p-0"},ne={class:"sm:w-[65%]"},de=e("div",{class:"w-full py-4 rounded-lg border-2 border-solid border-black"},[e("h1",{class:"text-xl font-medium text-center"},"修改個人資料")],-1),ie={class:"relative mt-3"},ce={class:"grid grid-cols-4 sm:grid-cols-5 px-4"},ue=["onClick"],pe={class:"p-8 rounded-lg border-2 border-solid border-black"},be=w({__name:"User",setup(k){const t=_([{title:"暱稱修改",value:"editName",id:0},{title:"重設密碼",value:"resetPassword",id:1}]),l=_("editName"),a=r=>{l.value=r},d=r=>[r===l.value?"text-white bg-black":"text-black bg-white"],i=N(()=>l.value==="editName"?te:re);return(r,P)=>(n(),f("div",ae,[e("section",ne,[de,e("div",ie,[e("div",ce,[(n(!0),f(y,null,G(t.value,p=>(n(),f("span",{key:p.id,class:K([d(p.value),"text-center whitespace-nowrap border-t border-l border-r border-solid rounded-t-lg cursor-pointer"]),onClick:U=>a(p.value)},D(p.title),11,ue))),128))]),e("div",pe,[(n(),C(E,null,[(n(),C(L(V(i))))],1024))])])]),x(R)]))}});export{be as default};
